{{/*
    Use Hugo's native Table of contents feature. You must set `toc: true` in your parameters for this to show.
    https://gohugo.io/content-management/toc/
  */}}
  
  {{- if .Params.recipe_toc -}}
  <div class="{{ .Site.Params.background_color_toc_class | default "bg-black" }} br3 pa3 nested-list-reset nested-copy-line-height nested-links-toc">
    <p class="f5 b mb3">{{ i18n "whatsInThis" . }}</p>
    <!-- fixed TOC based on recipe schema -->
    <ul>
      <li><a href="#name">Name</a></li>
      <li><a href="#description">Description</a></li>
      <li><a href="#tny">Time & Yield</a></li>
      <li><a href="#components">Components</a></li>
      <li><a href="#ingredients">Ingredients</a></li>
      <li><a href="#directions">Directrions</a></li>
    </ul>
  </div>
  {{- end -}}
  {{- if .Params.toc -}}
    <div class="{{ .Site.Params.background_color_toc_class | default "bg-black" }} br3 pa3 nested-list-reset nested-copy-line-height nested-links-toc">
      <p class="f5 b mb3">{{ i18n "whatsInThis" . }}</p>
        {{ .TableOfContents }}
    </div>
  {{- end -}}
  
  {{/*
    Use Hugo's native related content feature to pull in content that may have similar parameters, like tags. etc.
    https://gohugo.io/content-management/related/
  */}}
  
  {{ if .Params.show_related }}
    {{ $related := .Site.RegularPages.Related . | first 15 }}
    
    {{ with $related }}
      <div class="{{ .Site.Params.background_color_toc_class | default "bg-black" }} pa3 nested-list-reset nested-copy-line-height nested-links">
        <p class="f5 b mb3">{{ i18n "related" }}</p>
        <ul class="pa0 list">
          {{ range . }}
            <li  class="mb2">
              <a href="{{ .RelPermalink }}">
                {{- .Title -}}
              </a>
            </li>
            {{ end }}
        </ul>
    </div>
  {{ end }}
  {{ end }}
  